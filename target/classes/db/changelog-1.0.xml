<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <changeSet id="1" author="kishor">
        <sql>
            CREATE TABLE IF NOT EXISTS users
            (
            id integer NOT NULL,
            firstname character varying(20),
            lastname character varying(20),
            username character varying(20),
            mobile_no bigint,
            email character varying(25),
            password character varying(200),
            bio character varying(2000),
            role character varying(20),
            CONSTRAINT users_pk PRIMARY KEY (id)
            )
        </sql>
        <sql>
            CREATE TABLE IF NOT EXISTS song
            (
            id integer NOT NULL,
            title character varying(20),
            file_url character varying(20),
            duration integer NOT NULL,
            size integer NOT NULL,
            genre_id integer NOT NULL,
            artist_id integer NOT NULL,
            album_id integer ,
            action_id integer,
            CONSTRAINT song_pk PRIMARY KEY (id)
            )
        </sql>
        <sql>
            CREATE TABLE IF NOT EXISTS album
            (
            id integer NOT NULL,
            name character varying(20),
            release_date character varying(20),
            CONSTRAINT album_pk PRIMARY KEY (id)
            )
        </sql>
        <sql>
            CREATE TABLE IF NOT EXISTS genre
            (
            id integer NOT NULL,
            name character varying(20),
            type character varying(20),
            CONSTRAINT genre_pk PRIMARY KEY (id)
            )
        </sql>
        <sql>
            CREATE TABLE IF NOT EXISTS action
            (
            id integer NOT NULL,
            type character varying(20),
            user_id integer NOT NULL,
            CONSTRAINT action_pk PRIMARY KEY (id)
            )
        </sql>
    </changeSet>
    <changeSet id="2" author="kishor">
        <sql>
            CREATE SEQUENCE IF NOT EXISTS "user-seq"
            INCREMENT 1
            START 1
            MINVALUE 1
            MAXVALUE 9223372036854775807
            CACHE 1;
        </sql>
        <sql>
            CREATE SEQUENCE IF NOT EXISTS "song-seq"
            INCREMENT 1
            START 1
            MINVALUE 1
            MAXVALUE 9223372036854775807
            CACHE 1;
        </sql>
        <sql>
            CREATE SEQUENCE IF NOT EXISTS "action-seq"
            INCREMENT 1
            START 1
            MINVALUE 1
            MAXVALUE 9223372036854775807
            CACHE 1;
        </sql>
        <sql>
            CREATE SEQUENCE IF NOT EXISTS "album-seq"
            INCREMENT 1
            START 1
            MINVALUE 1
            MAXVALUE 9223372036854775807
            CACHE 1;
        </sql>
    </changeSet>
    <changeSet id="3" author="kishor">
        <sql>
            Insert into genre (id, name, type) Values
            (1, 'jazz', 'JAZZ'),
            (2, 'rock', 'ROCK'),
            (3, 'pop', 'POP'),
            (4, 'classical', 'CLASSICAL');
        </sql>
    </changeSet>
</databaseChangeLog>